{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BarChart,Bar,XAxis,YAxis,ResponsiveContainer,Tooltip,Legend}from'recharts';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faChevronDown}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CapsuleStatsChart=()=>{const[data,setData]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[displayMetric,setDisplayMetric]=useState('created');// 'created', 'privacy'\nuseEffect(()=>{const fetchStats=async()=>{try{const response=await fetch('https://istaisprojekts-main-lixsd6.laravel.cloud/api/capsules/monthly-stats');if(!response.ok){throw new Error('Failed to fetch stats');}const statsData=await response.json();setData(statsData);}catch(err){setError(err.message);}finally{setLoading(false);}};fetchStats();},[]);const metrics={created:'Created Capsules',privacy:'Privacy Distribution'};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full bg-[#1E1E1E] rounded-2xl p-6 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-white text-lg\",children:\"Loading statistics...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full bg-[#1E1E1E] rounded-2xl p-6 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-lg\",children:\"Error loading statistics\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full bg-[#1E1E1E] rounded-2xl p-6 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-white text-3xl font-bold italic\",children:\"Capsule Stats\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setDisplayMetric(displayMetric==='created'?'privacy':'created'),className:\"bg-[#5E3762] text-white px-4 py-2 rounded-full flex items-center\",children:[metrics[displayMetric],/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faChevronDown,className:\"ml-2\"})]})})]}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:displayMetric==='created'?/*#__PURE__*/_jsxs(BarChart,{data:data,margin:{top:10,right:10,left:10,bottom:20},children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"month\",tick:{fill:'#B2779F'},axisLine:false,tickLine:false}),/*#__PURE__*/_jsx(YAxis,{tick:{fill:'#B2779F'},axisLine:false,tickLine:false}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:'#2E2E2E',border:'none',borderRadius:'8px',color:'#B2779F'}}),/*#__PURE__*/_jsx(Bar,{dataKey:\"created\",fill:\"#A7ACCD\",radius:[10,10,0,0],barSize:30,name:\"Created Capsules\"})]}):/*#__PURE__*/_jsxs(BarChart,{data:data,margin:{top:10,right:10,left:10,bottom:20},children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"month\",tick:{fill:'#B2779F'},axisLine:false,tickLine:false}),/*#__PURE__*/_jsx(YAxis,{tick:{fill:'#B2779F'},axisLine:false,tickLine:false,stacked:true}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:'#2E2E2E',border:'none',borderRadius:'8px',color:'#B2779F'}}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"private\",fill:\"#A7ACCD\",radius:[10,10,0,0],barSize:30,stackId:\"a\",name:\"Private\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"public\",fill:\"#5E3762\",radius:[10,10,0,0],barSize:30,stackId:\"a\",name:\"Public\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"friends\",fill:\"#8B5E88\",radius:[10,10,0,0],barSize:30,stackId:\"a\",name:\"Friends\"})]})})]});};export default CapsuleStatsChart;","map":{"version":3,"names":["React","useState","useEffect","BarChart","Bar","XAxis","YAxis","ResponsiveContainer","Tooltip","Legend","FontAwesomeIcon","faChevronDown","jsx","_jsx","jsxs","_jsxs","CapsuleStatsChart","data","setData","loading","setLoading","error","setError","displayMetric","setDisplayMetric","fetchStats","response","fetch","ok","Error","statsData","json","err","message","metrics","created","privacy","className","children","onClick","icon","width","height","margin","top","right","left","bottom","dataKey","tick","fill","axisLine","tickLine","contentStyle","backgroundColor","border","borderRadius","color","radius","barSize","name","stacked","stackId"],"sources":["/Users/kristaps/Desktop/kvalifikacija/react/src/components/dashBoardComponents/CapsuleStats.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, ResponsiveContainer, Tooltip, Legend } from 'recharts';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons';\n\nconst CapsuleStatsChart = () => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [displayMetric, setDisplayMetric] = useState('created'); // 'created', 'privacy'\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        const response = await fetch('https://istaisprojekts-main-lixsd6.laravel.cloud/api/capsules/monthly-stats');\n        if (!response.ok) {\n          throw new Error('Failed to fetch stats');\n        }\n        const statsData = await response.json();\n        setData(statsData);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStats();\n  }, []);\n\n  const metrics = {\n    created: 'Created Capsules',\n    privacy: 'Privacy Distribution'\n  };\n\n  if (loading) {\n    return (\n      <div className=\"w-full h-full bg-[#1E1E1E] rounded-2xl p-6 flex items-center justify-center\">\n        <div className=\"text-white text-lg\">Loading statistics...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"w-full h-full bg-[#1E1E1E] rounded-2xl p-6 flex items-center justify-center\">\n        <div className=\"text-red-500 text-lg\">Error loading statistics</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full h-full bg-[#1E1E1E] rounded-2xl p-6 flex flex-col\">\n      <div className=\"flex justify-between items-center mb-4\">\n        <h2 className=\"text-white text-3xl font-bold italic\">Capsule Stats</h2>\n        <div className=\"flex gap-4\">\n          <button \n            onClick={() => setDisplayMetric(displayMetric === 'created' ? 'privacy' : 'created')}\n            className=\"bg-[#5E3762] text-white px-4 py-2 rounded-full flex items-center\"\n          >\n            {metrics[displayMetric]}\n            <FontAwesomeIcon icon={faChevronDown} className=\"ml-2\" />\n          </button>\n        </div>\n      </div>\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        {displayMetric === 'created' ? (\n          <BarChart data={data} margin={{ top: 10, right: 10, left: 10, bottom: 20 }}>\n            <XAxis \n              dataKey=\"month\" \n              tick={{ fill: '#B2779F' }} \n              axisLine={false} \n              tickLine={false}\n            />\n            <YAxis \n              tick={{ fill: '#B2779F' }} \n              axisLine={false} \n              tickLine={false}\n            />\n            <Tooltip\n              contentStyle={{\n                backgroundColor: '#2E2E2E',\n                border: 'none',\n                borderRadius: '8px',\n                color: '#B2779F'\n              }}\n            />\n            <Bar \n              dataKey=\"created\" \n              fill=\"#A7ACCD\" \n              radius={[10, 10, 0, 0]} \n              barSize={30}\n              name=\"Created Capsules\"\n            />\n          </BarChart>\n        ) : (\n          <BarChart data={data} margin={{ top: 10, right: 10, left: 10, bottom: 20 }}>\n            <XAxis \n              dataKey=\"month\" \n              tick={{ fill: '#B2779F' }} \n              axisLine={false} \n              tickLine={false}\n            />\n            <YAxis \n              tick={{ fill: '#B2779F' }} \n              axisLine={false} \n              tickLine={false}\n              stacked\n            />\n            <Tooltip\n              contentStyle={{\n                backgroundColor: '#2E2E2E',\n                border: 'none',\n                borderRadius: '8px',\n                color: '#B2779F'\n              }}\n            />\n            <Legend />\n            <Bar \n              dataKey=\"private\" \n              fill=\"#A7ACCD\" \n              radius={[10, 10, 0, 0]} \n              barSize={30}\n              stackId=\"a\"\n              name=\"Private\"\n            />\n            <Bar \n              dataKey=\"public\" \n              fill=\"#5E3762\" \n              radius={[10, 10, 0, 0]} \n              barSize={30}\n              stackId=\"a\"\n              name=\"Public\"\n            />\n            <Bar \n              dataKey=\"friends\" \n              fill=\"#8B5E88\" \n              radius={[10, 10, 0, 0]} \n              barSize={30}\n              stackId=\"a\"\n              name=\"Friends\"\n            />\n          </BarChart>\n        )}\n      </ResponsiveContainer>\n    </div>\n  );\n};\n\nexport default CapsuleStatsChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}