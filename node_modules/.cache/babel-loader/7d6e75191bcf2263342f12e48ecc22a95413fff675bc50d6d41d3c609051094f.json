{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{motion}from'framer-motion';import{X,Bell,Clock,UserPlus,Timer,MessageSquare}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const NotificationSidebar=_ref=>{let{isOpen,onClose,onUpdateCount,fetchFriendRequestCount,onCapsuleAccept}=_ref;const[friendRequests,setFriendRequests]=useState([]);const[sharedCapsules,setSharedCapsules]=useState([]);const[activeTab,setActiveTab]=useState('friends');const[error,setError]=useState(null);const fetchFriendRequests=useCallback(async()=>{try{const token=localStorage.getItem('access_token');if(!token){console.warn('No access token found');return;}const response=await fetch('https://istaisprojekts-main-lixsd6.laravel.cloud/api/friends/requests',{headers:{'Authorization':`Bearer ${token}`,'Accept':'application/json'}});if(!response.ok)throw new Error('Failed to fetch friend requests');const data=await response.json();setFriendRequests(data);onUpdateCount===null||onUpdateCount===void 0?void 0:onUpdateCount(data.length);}catch(error){console.error('Error fetching friend requests:',error);}},[onUpdateCount]);const fetchSharedCapsules=useCallback(async()=>{try{setError(null);const token=localStorage.getItem('access_token');if(!token){console.warn('No access token found');setError('Authentication required');return;}const response=await fetch('https://istaisprojekts-main-lixsd6.laravel.cloud/api/capsules/shared',{headers:{'Authorization':`Bearer ${token}`,'Accept':'application/json','Content-Type':'application/json'}});if(!response.ok){const errorData=await response.json().catch(()=>null);throw new Error((errorData===null||errorData===void 0?void 0:errorData.message)||`HTTP error! status: ${response.status}`);}const data=await response.json();setSharedCapsules(Array.isArray(data)?data:[]);}catch(error){console.error('Error fetching shared capsules:',error);setError(error.message);setSharedCapsules([]);}},[]);useEffect(()=>{if(isOpen){fetchFriendRequests();fetchSharedCapsules();}},[isOpen,fetchFriendRequests,fetchSharedCapsules]);const handleFriendRequest=async(requestId,action)=>{try{const token=localStorage.getItem('access_token');if(!token)return;const response=await fetch(`https://istaisprojekts-main-lixsd6.laravel.cloud/api/friends/request/${requestId}/${action}`,{method:'POST',headers:{'Authorization':`Bearer ${token}`,'Accept':'application/json'}});if(!response.ok)throw new Error(`Failed to ${action} friend request`);await fetchFriendRequests();await fetchFriendRequestCount();}catch(error){console.error(`Error ${action}ing friend request:`,error);}};const handleShareResponse=async(shareId,status)=>{try{const token=localStorage.getItem('access_token');if(!token){setError('Authentication required');return;}const share=sharedCapsules.find(s=>s.share_id===shareId);if(!share){setError('Share not found');return;}if(status==='accepted'){const capsuleData={share_id:share.share_id,capsule_id:share.capsule_id,// Match this with modal's expected structure\ntitle:share.title,vision:share.vision||'',shared_by:share.shared_by,status:share.status};console.log('Calling onCapsuleAccept with:',capsuleData);if(onCapsuleAccept){onCapsuleAccept(capsuleData);}else{console.error('onCapsuleAccept is not defined');}return;}const response=await fetch(`https://istaisprojekts-main-lixsd6.laravel.cloud/api/capsules/share/${shareId}/status`,{method:'PUT',headers:{'Authorization':`Bearer ${token}`,'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({status:'declined',capsule_id:share.capsule_id})});if(!response.ok){throw new Error('Failed to decline capsule share');}fetchSharedCapsules();}catch(error){console.error('Error handling capsule share:',error);setError(`Failed to handle capsule share: ${error.message}`);}};const sidebarVariants={open:{x:0,transition:{type:'spring',stiffness:300,damping:30}},closed:{x:'100%',transition:{type:'spring',stiffness:300,damping:30}}};return/*#__PURE__*/_jsx(motion.div,{initial:\"closed\",animate:isOpen?'open':'closed',variants:sidebarVariants,className:\"fixed top-0 right-0 h-full w-80 bg-background shadow-lg z-40 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full font-lexend\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-xl text-text\",children:\"Notifications\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-text hover:text-accent transition-colors\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b border-gray-200 text-accent\",children:[/*#__PURE__*/_jsx(\"button\",{className:`flex-1 py-2 px-4 ${activeTab==='friends'?'border-b-2 border-blue-500 text-text':''}`,onClick:()=>setActiveTab('friends'),children:\"Friend Requests\"}),/*#__PURE__*/_jsx(\"button\",{className:`flex-1 py-2 px-4 ${activeTab==='capsules'?'border-b-2 border-blue-500 text-text':''}`,onClick:()=>setActiveTab('capsules'),children:\"Shared Capsules\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow overflow-y-auto\",children:activeTab==='friends'?friendRequests.length>0?friendRequests.map(request=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.3},className:\"p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 mr-3\",children:/*#__PURE__*/_jsx(UserPlus,{size:18,className:\"text-blue-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-text\",children:[request.user.name,\" sent you a friend request\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(Clock,{size:12,className:\"mr-1\"}),new Date(request.created_at).toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFriendRequest(request.id,'accept'),className:\"px-3 py-1 bg-green-500 text-white rounded-md text-xs hover:bg-green-600 transition-colors\",children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFriendRequest(request.id,'decline'),className:\"px-3 py-1 bg-red-500 text-white rounded-md text-xs hover:bg-red-600 transition-colors\",children:\"Decline\"})]})]})]})},request.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-full text-gray-500\",children:[/*#__PURE__*/_jsx(UserPlus,{size:48}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-lg font-medium\",children:\"No friend requests\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-red-50 text-red-600 border-b border-red-100\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:error})}),sharedCapsules.length>0?sharedCapsules.map(share=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.3},className:\"p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 mr-3\",children:/*#__PURE__*/_jsx(Timer,{size:18,className:\"text-purple-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-text\",children:[share.shared_by,\" shared a capsule with you\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 mt-1\",children:share.title}),share.vision&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600 mt-1\",children:[\"Vision: \",share.vision]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1 flex items-center\",children:[/*#__PURE__*/_jsx(Clock,{size:12,className:\"mr-1\"}),new Date(share.created_at).toLocaleString()]}),share.status==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('Accept button clicked for share:',share);handleShareResponse(share.share_id,'accepted');},className:\"px-3 py-1 bg-green-500 text-white rounded-md text-xs hover:bg-green-600 transition-colors\",children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleShareResponse(share.share_id,'declined'),className:\"px-3 py-1 bg-red-500 text-white rounded-md text-xs hover:bg-red-600 transition-colors\",children:\"Decline\"})]}),share.status!=='pending'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs mt-2 capitalize text-gray-500\",children:[\"Status: \",share.status]})]})]})},share.share_id)):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-full text-gray-500\",children:[/*#__PURE__*/_jsx(MessageSquare,{size:48}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-lg font-medium\",children:\"No shared capsules\"})]})]})})]})});};export default NotificationSidebar;","map":{"version":3,"names":["React","useState","useEffect","useCallback","motion","X","Bell","Clock","UserPlus","Timer","MessageSquare","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NotificationSidebar","_ref","isOpen","onClose","onUpdateCount","fetchFriendRequestCount","onCapsuleAccept","friendRequests","setFriendRequests","sharedCapsules","setSharedCapsules","activeTab","setActiveTab","error","setError","fetchFriendRequests","token","localStorage","getItem","console","warn","response","fetch","headers","ok","Error","data","json","length","fetchSharedCapsules","errorData","catch","message","status","Array","isArray","handleFriendRequest","requestId","action","method","handleShareResponse","shareId","share","find","s","share_id","capsuleData","capsule_id","title","vision","shared_by","log","body","JSON","stringify","sidebarVariants","open","x","transition","type","stiffness","damping","closed","div","initial","animate","variants","className","children","onClick","size","map","request","opacity","y","duration","user","name","Date","created_at","toLocaleString","id"],"sources":["/Users/kristaps/Desktop/kvalifikacija/react/src/components/NotificationSidebar.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { X, Bell, Clock, UserPlus, Timer, MessageSquare } from 'lucide-react';\n\nconst NotificationSidebar = ({ isOpen, onClose, onUpdateCount, fetchFriendRequestCount, onCapsuleAccept }) => {\n  const [friendRequests, setFriendRequests] = useState([]);\n  const [sharedCapsules, setSharedCapsules] = useState([]);\n  const [activeTab, setActiveTab] = useState('friends');\n  const [error, setError] = useState(null);\n\n  const fetchFriendRequests = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) {\n        console.warn('No access token found');\n        return;\n      }\n\n      const response = await fetch('https://istaisprojekts-main-lixsd6.laravel.cloud/api/friends/requests', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Accept': 'application/json',\n        },\n      });\n\n      if (!response.ok) throw new Error('Failed to fetch friend requests');\n\n      const data = await response.json();\n      setFriendRequests(data);\n      onUpdateCount?.(data.length);\n    } catch (error) {\n      console.error('Error fetching friend requests:', error);\n    }\n  }, [onUpdateCount]);\n\n  const fetchSharedCapsules = useCallback(async () => {\n    try {\n      setError(null);\n      const token = localStorage.getItem('access_token');\n\n      if (!token) {\n        console.warn('No access token found');\n        setError('Authentication required');\n        return;\n      }\n\n      const response = await fetch('https://istaisprojekts-main-lixsd6.laravel.cloud/api/capsules/shared', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => null);\n        throw new Error(errorData?.message || `HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      setSharedCapsules(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Error fetching shared capsules:', error);\n      setError(error.message);\n      setSharedCapsules([]);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchFriendRequests();\n      fetchSharedCapsules();\n    }\n  }, [isOpen, fetchFriendRequests, fetchSharedCapsules]);\n\n  const handleFriendRequest = async (requestId, action) => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) return;\n\n      const response = await fetch(`https://istaisprojekts-main-lixsd6.laravel.cloud/api/friends/request/${requestId}/${action}`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Accept': 'application/json',\n        },\n      });\n\n      if (!response.ok) throw new Error(`Failed to ${action} friend request`);\n\n      await fetchFriendRequests();\n      await fetchFriendRequestCount();\n    } catch (error) {\n      console.error(`Error ${action}ing friend request:`, error);\n    }\n  };\n\n  const handleShareResponse = async (shareId, status) => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) {\n        setError('Authentication required');\n        return;\n      }\n\n      const share = sharedCapsules.find(s => s.share_id === shareId);\n\n      if (!share) {\n        setError('Share not found');\n        return;\n      }\n\n      if (status === 'accepted') {\n        const capsuleData = {\n          share_id: share.share_id,\n          capsule_id: share.capsule_id, // Match this with modal's expected structure\n          title: share.title,\n          vision: share.vision || '',\n          shared_by: share.shared_by,\n          status: share.status\n        };\n        console.log('Calling onCapsuleAccept with:', capsuleData);\n        if (onCapsuleAccept) {\n          onCapsuleAccept(capsuleData);\n        } else {\n          console.error('onCapsuleAccept is not defined');\n        }\n        return;\n      }\n\n      const response = await fetch(`https://istaisprojekts-main-lixsd6.laravel.cloud/api/capsules/share/${shareId}/status`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          status: 'declined',\n          capsule_id: share.capsule_id\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to decline capsule share');\n      }\n\n      fetchSharedCapsules();\n\n    } catch (error) {\n      console.error('Error handling capsule share:', error);\n      setError(`Failed to handle capsule share: ${error.message}`);\n    }\n  };\n  const sidebarVariants = {\n    open: { x: 0, transition: { type: 'spring', stiffness: 300, damping: 30 } },\n    closed: { x: '100%', transition: { type: 'spring', stiffness: 300, damping: 30 } },\n  };\n\n  return (\n      <motion.div\n          initial=\"closed\"\n          animate={isOpen ? 'open' : 'closed'}\n          variants={sidebarVariants}\n          className=\"fixed top-0 right-0 h-full w-80 bg-background shadow-lg z-40 overflow-hidden\"\n      >\n        <div className=\"flex flex-col h-full font-lexend\">\n          <div className=\"flex justify-between items-center p-4 border-b border-gray-200\">\n            <h2 className=\"font-bold text-xl text-text\">Notifications</h2>\n            <button onClick={onClose} className=\"text-text hover:text-accent transition-colors\">\n              <X size={24} />\n            </button>\n          </div>\n\n          <div className=\"flex border-b border-gray-200 text-accent\">\n            <button\n                className={`flex-1 py-2 px-4 ${activeTab === 'friends' ? 'border-b-2 border-blue-500 text-text' : ''}`}\n                onClick={() => setActiveTab('friends')}\n            >\n              Friend Requests\n            </button>\n            <button\n                className={`flex-1 py-2 px-4 ${activeTab === 'capsules' ? 'border-b-2 border-blue-500 text-text' : ''}`}\n                onClick={() => setActiveTab('capsules')}\n            >\n              Shared Capsules\n            </button>\n          </div>\n\n          <div className=\"flex-grow overflow-y-auto\">\n            {activeTab === 'friends' ? (\n                friendRequests.length > 0 ? (\n                    friendRequests.map((request) => (\n                        <motion.div\n                            key={request.id}\n                            initial={{ opacity: 0, y: 20 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            transition={{ duration: 0.3 }}\n                            className=\"p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors\"\n                        >\n                          <div className=\"flex items-start\">\n                            <div className=\"flex-shrink-0 mr-3\">\n                              <UserPlus size={18} className=\"text-blue-500\" />\n                            </div>\n                            <div className=\"flex-grow\">\n                              <p className=\"text-sm text-text\">{request.user.name} sent you a friend request</p>\n                              <p className=\"text-xs text-gray-500 mt-1 flex items-center\">\n                                <Clock size={12} className=\"mr-1\" />\n                                {new Date(request.created_at).toLocaleString()}\n                              </p>\n                              <div className=\"mt-2 flex space-x-2\">\n                                <button\n                                    onClick={() => handleFriendRequest(request.id, 'accept')}\n                                    className=\"px-3 py-1 bg-green-500 text-white rounded-md text-xs hover:bg-green-600 transition-colors\"\n                                >\n                                  Accept\n                                </button>\n                                <button\n                                    onClick={() => handleFriendRequest(request.id, 'decline')}\n                                    className=\"px-3 py-1 bg-red-500 text-white rounded-md text-xs hover:bg-red-600 transition-colors\"\n                                >\n                                  Decline\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </motion.div>\n                    ))\n                ) : (\n                    <div className=\"flex flex-col items-center justify-center h-full text-gray-500\">\n                      <UserPlus size={48} />\n                      <p className=\"mt-4 text-lg font-medium\">No friend requests</p>\n                    </div>\n                )\n            ) : (\n                <>\n                  {error && (\n                      <div className=\"p-4 bg-red-50 text-red-600 border-b border-red-100\">\n                        <p className=\"text-sm\">{error}</p>\n                      </div>\n                  )}\n\n                  {sharedCapsules.length > 0 ? (\n                      sharedCapsules.map((share) => (\n                          <motion.div\n                              key={share.share_id}\n                              initial={{ opacity: 0, y: 20 }}\n                              animate={{ opacity: 1, y: 0 }}\n                              transition={{ duration: 0.3 }}\n                              className=\"p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors\"\n                          >\n                            <div className=\"flex items-start\">\n                              <div className=\"flex-shrink-0 mr-3\">\n                                <Timer size={18} className=\"text-purple-500\" />\n                              </div>\n                              <div className=\"flex-grow\">\n                                <p className=\"text-sm text-text\">\n                                  {share.shared_by} shared a capsule with you\n                                </p>\n                                <p className=\"text-sm font-medium text-gray-900 mt-1\">\n                                  {share.title}\n                                </p>\n                                {share.vision && (\n                                    <p className=\"text-xs text-gray-600 mt-1\">\n                                      Vision: {share.vision}\n                                    </p>\n                                )}\n                                <p className=\"text-xs text-gray-500 mt-1 flex items-center\">\n                                  <Clock size={12} className=\"mr-1\" />\n                                  {new Date(share.created_at).toLocaleString()}\n                                </p>\n\n                                {share.status === 'pending' && (\n                                    <div className=\"mt-2 flex space-x-2\">\n                                      <button\n                                          onClick={() => {\n                                            console.log('Accept button clicked for share:', share);\n                                            handleShareResponse(share.share_id, 'accepted');\n                                          }}\n                                          className=\"px-3 py-1 bg-green-500 text-white rounded-md text-xs hover:bg-green-600 transition-colors\"\n                                      >\n                                        Accept\n                                      </button>\n                                      <button\n                                          onClick={() => handleShareResponse(share.share_id, 'declined')}\n                                          className=\"px-3 py-1 bg-red-500 text-white rounded-md text-xs hover:bg-red-600 transition-colors\"\n                                      >\n                                        Decline\n                                      </button>\n                                    </div>\n                                )}\n\n                                {share.status !== 'pending' && (\n                                    <p className=\"text-xs mt-2 capitalize text-gray-500\">\n                                      Status: {share.status}\n                                    </p>\n                                )}\n                              </div>\n                            </div>\n                          </motion.div>\n                      ))\n                  ) : (\n                      <div className=\"flex flex-col items-center justify-center h-full text-gray-500\">\n                        <MessageSquare size={48} />\n                        <p className=\"mt-4 text-lg font-medium\">No shared capsules</p>\n                      </div>\n                  )}\n                </>\n            )}\n          </div>\n        </div>\n      </motion.div>\n  );\n};\n\nexport default NotificationSidebar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}