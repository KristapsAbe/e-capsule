{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Clock,Lock,Sparkles,Play,Pause,RefreshCw,AlertTriangle}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AnimatedCapsule=_ref=>{var _processedCapsuleData2,_processedCapsuleData5,_processedCapsuleData6;let{capsuleData}=_ref;// Component state\nconst[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[processedCapsuleData,setProcessedCapsuleData]=useState(null);const[stage,setStage]=useState(0);const[isUnlocking,setIsUnlocking]=useState(false);const[showContent,setShowContent]=useState(false);const[activeIndex,setActiveIndex]=useState(0);const[isPlaying,setIsPlaying]=useState(true);const[transition,setTransition]=useState('zoom');const[progress,setProgress]=useState(0);// Process capsule data from props\nuseEffect(()=>{if(!capsuleData){setError('No capsule data provided');return;}try{setLoading(true);// Parse images if they're in string format\nlet parsedImages;if(typeof capsuleData.images==='string'){parsedImages=JSON.parse(capsuleData.images);}else{parsedImages=capsuleData.images;}// Transform the capsule data to match what the component expects\nconst transformedData={id:capsuleData.id,title:capsuleData.title,description:capsuleData.description,privacy:capsuleData.privacy||'private',images:parsedImages.map((img,index)=>({src:img.includes('http')?img:`https://istaisprojekts-main-lixsd6.laravel.cloud/storage/${img}`,caption:`Memory ${index+1}`,date:new Date(capsuleData.created_at||Date.now()).toLocaleDateString()})),time:{is_available:!capsuleData.daysLeft||capsuleData.daysLeft<=0,human_readable:capsuleData.date||new Date().toLocaleDateString(),days_until_available:capsuleData.daysLeft||0,formatted:capsuleData.date||new Date().toLocaleDateString()},owner:{name:capsuleData.userName||'User'},created_at:{human_readable:new Date(capsuleData.created_at||Date.now()).toLocaleDateString()},shared_users:capsuleData.shared_users||[],vision:capsuleData.vision||''};setProcessedCapsuleData(transformedData);// Auto-unlock if the capsule is already available\nif(transformedData.time.is_available){setStage(0);}}catch(err){console.error('Error processing capsule data:',err);setError('Failed to process capsule data');}finally{setLoading(false);}},[capsuleData]);// Handle image slideshow\nuseEffect(()=>{var _processedCapsuleData;let progressTimer;if(isPlaying&&showContent&&(processedCapsuleData===null||processedCapsuleData===void 0?void 0:(_processedCapsuleData=processedCapsuleData.images)===null||_processedCapsuleData===void 0?void 0:_processedCapsuleData.length)>0){setProgress(0);progressTimer=setInterval(()=>{setProgress(prev=>{if(prev>=100){setActiveIndex(prevIndex=>{const next=(prevIndex+1)%processedCapsuleData.images.length;setTransition(['zoom','pan','fade'][Math.floor(Math.random()*3)]);return next;});return 0;}return prev+2;});},100);}return()=>clearInterval(progressTimer);},[isPlaying,activeIndex,showContent,processedCapsuleData===null||processedCapsuleData===void 0?void 0:(_processedCapsuleData2=processedCapsuleData.images)===null||_processedCapsuleData2===void 0?void 0:_processedCapsuleData2.length]);// Particle effects for animation\nconst particles=[...Array(40)].map((_,i)=>({color:['#A7ACCD',// primary\n'#5E3762',// secondary\n'#B2779F',// accent\n'#FF95DD',// button\n'#E5E6F0',// text\n'#FFB6C1',// light pink\n'#9370DB',// medium purple\n'#FF69B4'// hot pink\n][Math.floor(Math.random()*8)],size:Math.random()*8+4,spread:Math.random()*360,distance:Math.random()*200+100,delay:Math.random()*0.5}));const handleUnlock=()=>{var _processedCapsuleData3,_processedCapsuleData4;// Only allow unlocking if the capsule is available or in demo mode\nif(processedCapsuleData!==null&&processedCapsuleData!==void 0&&(_processedCapsuleData3=processedCapsuleData.time)!==null&&_processedCapsuleData3!==void 0&&_processedCapsuleData3.is_available&&stage<3){setStage(prev=>prev+1);if(stage===2){setIsUnlocking(true);setTimeout(()=>{setShowContent(true);},3000);}}else if(!(processedCapsuleData!==null&&processedCapsuleData!==void 0&&(_processedCapsuleData4=processedCapsuleData.time)!==null&&_processedCapsuleData4!==void 0&&_processedCapsuleData4.is_available)){// Show a pulsing effect but don't unlock\nsetStage(1);setTimeout(()=>setStage(0),500);}};const getImageAnimation=()=>{switch(transition){case'zoom':return{initial:{scale:1.2,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.8,opacity:0},transition:{duration:2.5,ease:'easeOut'}};case'pan':return{initial:{x:'100%',opacity:0},animate:{x:0,opacity:1},exit:{x:'-100%',opacity:0},transition:{duration:2.5,ease:'easeOut'}};case'fade':return{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:2,ease:'easeOut'}};default:return{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:2,ease:'easeOut'}};}};// Loading state\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full min-h-[600px] flex items-center justify-center bg-gradient-to-b from-background to-secondary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 border-4 border-button border-t-transparent rounded-full animate-spin\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-text text-lg\",children:\"Loading time capsule...\"})]})});}// Error state\nif(error){return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full min-h-[600px] flex items-center justify-center bg-gradient-to-b from-background to-secondary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center gap-4 max-w-md text-center p-6\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-16 h-16 text-red-500\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-text\",children:\"Error Loading Capsule\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-text/80\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-4 px-6 py-2 bg-button text-white rounded-full hover:bg-button/80 transition-colors\",onClick:()=>window.location.reload(),children:\"Try Again\"})]})});}const validImages=(processedCapsuleData===null||processedCapsuleData===void 0?void 0:processedCapsuleData.images)||[];const currentImage=validImages[activeIndex]||{};const isLocked=!(processedCapsuleData!==null&&processedCapsuleData!==void 0&&(_processedCapsuleData5=processedCapsuleData.time)!==null&&_processedCapsuleData5!==void 0&&_processedCapsuleData5.is_available);return/*#__PURE__*/_jsx(\"div\",{className:\"w-full max-w-8xl mx-auto p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-[850px] bg-secondary rounded-lg overflow-hidden shadow-lg w-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full min-h-[600px] bg-gradient-to-b from-background to-secondary relative overflow-hidden\",children:!showContent?/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full h-full flex flex-col items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0\",children:[...Array(30)].map((_,i)=>/*#__PURE__*/_jsx(motion.div,{className:\"absolute w-2 h-2 rounded-full\",style:{background:`linear-gradient(45deg, ${['#A7ACCD','#5E3762','#B2779F','#FF95DD'][Math.floor(Math.random()*4)]}aa, transparent)`},initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,scale:0.5},animate:{y:[-30,30],x:[-20,20],scale:[0.5,1.5,0.5],opacity:[0.2,0.8,0.2]},transition:{duration:3+Math.random()*2,repeat:Infinity,repeatType:'reverse'}},i))}),isUnlocking&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 pointer-events-none\",children:particles.map((particle,i)=>/*#__PURE__*/_jsx(motion.div,{className:\"absolute left-1/2 top-1/2 rounded-full\",style:{width:particle.size,height:particle.size,backgroundColor:particle.color},initial:{x:0,y:0,scale:0,opacity:1},animate:{x:Math.cos(particle.spread*Math.PI/180)*particle.distance,y:Math.sin(particle.spread*Math.PI/180)*particle.distance,scale:[0,3,0],opacity:[1,0.8,0]},transition:{duration:2,delay:particle.delay,ease:'easeOut'}},i))}),/*#__PURE__*/_jsxs(motion.div,{className:\"relative\",animate:isUnlocking?{rotate:[0,-10,10,-10,0],scale:[1,1.2,0.8,1.4,0],filter:['brightness(1)','brightness(2)','brightness(3)','brightness(4)']}:{rotate:0,scale:1},transition:isUnlocking?{duration:2,times:[0,0.2,0.4,0.6,1],ease:'easeInOut'}:{duration:0.3},children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-20 left-1/2 transform -translate-x-1/2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:[0,1,2].map(i=>/*#__PURE__*/_jsx(motion.div,{className:`w-4 h-4 rounded-full ${i<stage?'bg-button':'bg-primary/30'}`,animate:{scale:i===stage-1?[1,1.2,1]:1,boxShadow:i<stage?['0 0 0 0 rgba(255, 149, 221, 0)','0 0 20px 10px rgba(255, 149, 221, 0.5)','0 0 0 0 rgba(255, 149, 221, 0)']:'none'},transition:{duration:1.5,repeat:Infinity}},i))})}),/*#__PURE__*/_jsxs(motion.div,{className:\"w-80 h-[28rem] rounded-3xl relative cursor-pointer overflow-hidden\",style:{background:`linear-gradient(135deg, ${isUnlocking?'#FF95DD':'#5E3762'}, ${isUnlocking?'#B2779F':'#A7ACCD'})`},whileHover:{scale:isLocked?1:1.02},onClick:handleUnlock,children:[/*#__PURE__*/_jsx(motion.div,{className:\"absolute inset-0\",animate:{background:isUnlocking?['radial-gradient(circle at center, transparent 0%, transparent 100%)','radial-gradient(circle at center, rgba(255,149,221,0.5) 0%, transparent 70%)','radial-gradient(circle at center, transparent 0%, transparent 100%)']:'none'},transition:{duration:2,repeat:Infinity}}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-4\",children:[/*#__PURE__*/_jsx(motion.div,{animate:isUnlocking?{scale:[1,2,0],rotate:[0,180,360],opacity:[1,0.8,0]}:{scale:1,rotate:0,opacity:1},transition:{duration:1.5},children:stage<3?/*#__PURE__*/_jsx(Lock,{className:\"w-16 h-16 text-text\"}):/*#__PURE__*/_jsx(Sparkles,{className:\"w-16 h-16 text-button\"})}),/*#__PURE__*/_jsx(motion.div,{className:\"text-text font-bold text-xl text-center\",animate:isUnlocking?{opacity:[1,0],y:[0,-20]}:{},transition:{duration:1},children:isLocked?`Available in ${Math.abs(processedCapsuleData===null||processedCapsuleData===void 0?void 0:(_processedCapsuleData6=processedCapsuleData.time)===null||_processedCapsuleData6===void 0?void 0:_processedCapsuleData6.days_until_available)} days`:stage<3?'Click to Unlock':'Opening...'})]}),/*#__PURE__*/_jsx(motion.div,{className:\"absolute top-8 left-1/2 -translate-x-1/2 w-40 h-1 rounded\",style:{background:isUnlocking?'#FF95DD':'#A7ACCD'},animate:isUnlocking?{scaleX:[1,1.5,0],opacity:[1,0.8,0]}:{},transition:{duration:1.5}}),/*#__PURE__*/_jsx(motion.div,{className:\"absolute bottom-8 left-1/2 -translate-x-1/2 w-40 h-1 rounded\",style:{background:isUnlocking?'#FF95DD':'#A7ACCD'},animate:isUnlocking?{scaleX:[1,1.5,0],opacity:[1,0.8,0]}:{},transition:{duration:1.5}}),/*#__PURE__*/_jsx(Clock,{className:\"absolute bottom-16 left-1/2 transform -translate-x-1/2 w-6 h-6 text-text\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-2 left-0 right-0 text-center px-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-text text-sm font-medium truncate\",children:processedCapsuleData===null||processedCapsuleData===void 0?void 0:processedCapsuleData.title})})]})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 bg-black\",children:[/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:validImages.length>0&&/*#__PURE__*/_jsxs(motion.div,{className:\"relative w-full h-full\",...getImageAnimation(),children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-b from-black/20 to-black/60\"}),/*#__PURE__*/_jsx(\"img\",{src:currentImage.src||'/api/placeholder/800/600',alt:currentImage.caption,className:\"w-full h-full object-cover scale-110\"}),/*#__PURE__*/_jsxs(motion.div,{className:\"absolute bottom-20 left-0 right-0 p-8 text-center\",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:0.5,duration:1},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-white text-4xl font-bold mb-2\",children:currentImage.caption}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white/80 text-xl\",children:currentImage.date})]})]},activeIndex)}),validImages.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-6 left-4 right-4 flex gap-2 z-10\",children:validImages.map((_,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 h-1.5 bg-white/20 rounded-full overflow-hidden cursor-pointer\",onClick:()=>{setActiveIndex(index);setProgress(0);},children:/*#__PURE__*/_jsx(motion.div,{className:\"h-full bg-white\",initial:{width:'0%'},animate:{width:index===activeIndex?`${progress}%`:index<activeIndex?'100%':'0%'},transition:{duration:0.1}})},index))}),validImages.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-0 left-0 right-0 p-4 flex justify-center items-center gap-4 bg-gradient-to-t from-black/80 to-transparent\",children:[/*#__PURE__*/_jsx(motion.button,{className:\"p-3 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-colors\",whileHover:{scale:1.1},whileTap:{scale:0.95},onClick:()=>setIsPlaying(!isPlaying),children:isPlaying?/*#__PURE__*/_jsx(Pause,{className:\"w-6 h-6 text-white\"}):/*#__PURE__*/_jsx(Play,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsx(motion.button,{className:\"p-3 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-colors\",whileHover:{scale:1.1},whileTap:{scale:0.95},onClick:()=>{setActiveIndex(prev=>(prev+1)%validImages.length);setProgress(0);},children:/*#__PURE__*/_jsx(RefreshCw,{className:\"w-6 h-6 text-white\"})})]})]})})})})})});};export default AnimatedCapsule;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","Clock","Lock","Sparkles","Play","Pause","RefreshCw","AlertTriangle","jsx","_jsx","jsxs","_jsxs","AnimatedCapsule","_ref","_processedCapsuleData2","_processedCapsuleData5","_processedCapsuleData6","capsuleData","loading","setLoading","error","setError","processedCapsuleData","setProcessedCapsuleData","stage","setStage","isUnlocking","setIsUnlocking","showContent","setShowContent","activeIndex","setActiveIndex","isPlaying","setIsPlaying","transition","setTransition","progress","setProgress","parsedImages","images","JSON","parse","transformedData","id","title","description","privacy","map","img","index","src","includes","caption","date","Date","created_at","now","toLocaleDateString","time","is_available","daysLeft","human_readable","days_until_available","formatted","owner","name","userName","shared_users","vision","err","console","_processedCapsuleData","progressTimer","length","setInterval","prev","prevIndex","next","Math","floor","random","clearInterval","particles","Array","_","i","color","size","spread","distance","delay","handleUnlock","_processedCapsuleData3","_processedCapsuleData4","setTimeout","getImageAnimation","initial","scale","opacity","animate","exit","duration","ease","x","className","children","onClick","window","location","reload","validImages","currentImage","isLocked","div","style","background","innerWidth","y","innerHeight","repeat","Infinity","repeatType","particle","width","height","backgroundColor","cos","PI","sin","rotate","filter","times","boxShadow","whileHover","abs","scaleX","mode","alt","button","whileTap"],"sources":["/Users/kristaps/Desktop/kvalifikacija/react/src/components/profileComponents/AnimatedCapsule.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Clock, Lock, Sparkles, Play, Pause, RefreshCw, AlertTriangle } from 'lucide-react';\n\nconst AnimatedCapsule = ({ capsuleData }) => {\n  // Component state\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [processedCapsuleData, setProcessedCapsuleData] = useState(null);\n  const [stage, setStage] = useState(0);\n  const [isUnlocking, setIsUnlocking] = useState(false);\n  const [showContent, setShowContent] = useState(false);\n  const [activeIndex, setActiveIndex] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(true);\n  const [transition, setTransition] = useState('zoom');\n  const [progress, setProgress] = useState(0);\n\n  // Process capsule data from props\n  useEffect(() => {\n    if (!capsuleData) {\n      setError('No capsule data provided');\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      // Parse images if they're in string format\n      let parsedImages;\n      if (typeof capsuleData.images === 'string') {\n        parsedImages = JSON.parse(capsuleData.images);\n      } else {\n        parsedImages = capsuleData.images;\n      }\n\n      // Transform the capsule data to match what the component expects\n      const transformedData = {\n        id: capsuleData.id,\n        title: capsuleData.title,\n        description: capsuleData.description,\n        privacy: capsuleData.privacy || 'private',\n        images: parsedImages.map((img, index) => ({\n          src: img.includes('http') ? img : `https://istaisprojekts-main-lixsd6.laravel.cloud/storage/${img}`,\n          caption: `Memory ${index + 1}`,\n          date: new Date(capsuleData.created_at || Date.now()).toLocaleDateString(),\n        })),\n        time: {\n          is_available: !capsuleData.daysLeft || capsuleData.daysLeft <= 0,\n          human_readable: capsuleData.date || new Date().toLocaleDateString(),\n          days_until_available: capsuleData.daysLeft || 0,\n          formatted: capsuleData.date || new Date().toLocaleDateString(),\n        },\n        owner: {\n          name: capsuleData.userName || 'User',\n        },\n        created_at: {\n          human_readable: new Date(capsuleData.created_at || Date.now()).toLocaleDateString(),\n        },\n        shared_users: capsuleData.shared_users || [],\n        vision: capsuleData.vision || '',\n      };\n\n      setProcessedCapsuleData(transformedData);\n\n      // Auto-unlock if the capsule is already available\n      if (transformedData.time.is_available) {\n        setStage(0);\n      }\n    } catch (err) {\n      console.error('Error processing capsule data:', err);\n      setError('Failed to process capsule data');\n    } finally {\n      setLoading(false);\n    }\n  }, [capsuleData]);\n\n  // Handle image slideshow\n  useEffect(() => {\n    let progressTimer;\n    if (isPlaying && showContent && processedCapsuleData?.images?.length > 0) {\n      setProgress(0);\n      progressTimer = setInterval(() => {\n        setProgress((prev) => {\n          if (prev >= 100) {\n            setActiveIndex((prevIndex) => {\n              const next = (prevIndex + 1) % processedCapsuleData.images.length;\n              setTransition(['zoom', 'pan', 'fade'][Math.floor(Math.random() * 3)]);\n              return next;\n            });\n            return 0;\n          }\n          return prev + 2;\n        });\n      }, 100);\n    }\n    return () => clearInterval(progressTimer);\n  }, [isPlaying, activeIndex, showContent, processedCapsuleData?.images?.length]);\n\n  // Particle effects for animation\n  const particles = [...Array(40)].map((_, i) => ({\n    color: [\n      '#A7ACCD', // primary\n      '#5E3762', // secondary\n      '#B2779F', // accent\n      '#FF95DD', // button\n      '#E5E6F0', // text\n      '#FFB6C1', // light pink\n      '#9370DB', // medium purple\n      '#FF69B4', // hot pink\n    ][Math.floor(Math.random() * 8)],\n    size: Math.random() * 8 + 4,\n    spread: Math.random() * 360,\n    distance: Math.random() * 200 + 100,\n    delay: Math.random() * 0.5,\n  }));\n\n  const handleUnlock = () => {\n    // Only allow unlocking if the capsule is available or in demo mode\n    if (processedCapsuleData?.time?.is_available && stage < 3) {\n      setStage((prev) => prev + 1);\n      if (stage === 2) {\n        setIsUnlocking(true);\n        setTimeout(() => {\n          setShowContent(true);\n        }, 3000);\n      }\n    } else if (!processedCapsuleData?.time?.is_available) {\n      // Show a pulsing effect but don't unlock\n      setStage(1);\n      setTimeout(() => setStage(0), 500);\n    }\n  };\n\n  const getImageAnimation = () => {\n    switch (transition) {\n      case 'zoom':\n        return {\n          initial: { scale: 1.2, opacity: 0 },\n          animate: { scale: 1, opacity: 1 },\n          exit: { scale: 0.8, opacity: 0 },\n          transition: { duration: 2.5, ease: 'easeOut' },\n        };\n      case 'pan':\n        return {\n          initial: { x: '100%', opacity: 0 },\n          animate: { x: 0, opacity: 1 },\n          exit: { x: '-100%', opacity: 0 },\n          transition: { duration: 2.5, ease: 'easeOut' },\n        };\n      case 'fade':\n        return {\n          initial: { opacity: 0 },\n          animate: { opacity: 1 },\n          exit: { opacity: 0 },\n          transition: { duration: 2, ease: 'easeOut' },\n        };\n      default:\n        return {\n          initial: { opacity: 0 },\n          animate: { opacity: 1 },\n          exit: { opacity: 0 },\n          transition: { duration: 2, ease: 'easeOut' },\n        };\n    }\n  };\n\n  // Loading state\n  if (loading) {\n    return (\n        <div className=\"w-full h-full min-h-[600px] flex items-center justify-center bg-gradient-to-b from-background to-secondary\">\n          <div className=\"flex flex-col items-center gap-4\">\n            <div className=\"w-16 h-16 border-4 border-button border-t-transparent rounded-full animate-spin\"></div>\n            <p className=\"text-text text-lg\">Loading time capsule...</p>\n          </div>\n        </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n        <div className=\"w-full h-full min-h-[600px] flex items-center justify-center bg-gradient-to-b from-background to-secondary\">\n          <div className=\"flex flex-col items-center gap-4 max-w-md text-center p-6\">\n            <AlertTriangle className=\"w-16 h-16 text-red-500\" />\n            <h2 className=\"text-2xl font-bold text-text\">Error Loading Capsule</h2>\n            <p className=\"text-text/80\">{error}</p>\n            <button\n                className=\"mt-4 px-6 py-2 bg-button text-white rounded-full hover:bg-button/80 transition-colors\"\n                onClick={() => window.location.reload()}\n            >\n              Try Again\n            </button>\n          </div>\n        </div>\n    );\n  }\n\n  const validImages = processedCapsuleData?.images || [];\n  const currentImage = validImages[activeIndex] || {};\n  const isLocked = !processedCapsuleData?.time?.is_available;\n\n  return (\n      <div className=\"w-full max-w-8xl mx-auto p-4\">\n        {/* Centered Container */}\n        <div className=\"flex justify-center items-center\">\n          {/* Animated Capsule */}\n          <div className=\"h-[850px] bg-secondary rounded-lg overflow-hidden shadow-lg w-full\">\n            <div className=\"w-full h-full min-h-[600px] bg-gradient-to-b from-background to-secondary relative overflow-hidden\">\n              {!showContent ? (\n                  <div className=\"relative w-full h-full flex flex-col items-center justify-center\">\n                    {/* Background effects */}\n                    <div className=\"absolute inset-0\">\n                      {[...Array(30)].map((_, i) => (\n                          <motion.div\n                              key={i}\n                              className=\"absolute w-2 h-2 rounded-full\"\n                              style={{\n                                background: `linear-gradient(45deg, ${\n                                    ['#A7ACCD', '#5E3762', '#B2779F', '#FF95DD'][Math.floor(Math.random() * 4)]\n                                }aa, transparent)`,\n                              }}\n                              initial={{\n                                x: Math.random() * window.innerWidth,\n                                y: Math.random() * window.innerHeight,\n                                scale: 0.5,\n                              }}\n                              animate={{\n                                y: [-30, 30],\n                                x: [-20, 20],\n                                scale: [0.5, 1.5, 0.5],\n                                opacity: [0.2, 0.8, 0.2],\n                              }}\n                              transition={{\n                                duration: 3 + Math.random() * 2,\n                                repeat: Infinity,\n                                repeatType: 'reverse',\n                              }}\n                          />\n                      ))}\n                    </div>\n\n                    {/* Explosion particles */}\n                    {isUnlocking && (\n                        <div className=\"absolute inset-0 pointer-events-none\">\n                          {particles.map((particle, i) => (\n                              <motion.div\n                                  key={i}\n                                  className=\"absolute left-1/2 top-1/2 rounded-full\"\n                                  style={{\n                                    width: particle.size,\n                                    height: particle.size,\n                                    backgroundColor: particle.color,\n                                  }}\n                                  initial={{ x: 0, y: 0, scale: 0, opacity: 1 }}\n                                  animate={{\n                                    x: Math.cos((particle.spread * Math.PI) / 180) * particle.distance,\n                                    y: Math.sin((particle.spread * Math.PI) / 180) * particle.distance,\n                                    scale: [0, 3, 0],\n                                    opacity: [1, 0.8, 0],\n                                  }}\n                                  transition={{\n                                    duration: 2,\n                                    delay: particle.delay,\n                                    ease: 'easeOut',\n                                  }}\n                              />\n                          ))}\n                        </div>\n                    )}\n\n                    {/* Main capsule container */}\n                    <motion.div\n                        className=\"relative\"\n                        animate={\n                          isUnlocking\n                              ? {\n                                rotate: [0, -10, 10, -10, 0],\n                                scale: [1, 1.2, 0.8, 1.4, 0],\n                                filter: ['brightness(1)', 'brightness(2)', 'brightness(3)', 'brightness(4)'],\n                              }\n                              : {\n                                rotate: 0,\n                                scale: 1,\n                              }\n                        }\n                        transition={\n                          isUnlocking\n                              ? {\n                                duration: 2,\n                                times: [0, 0.2, 0.4, 0.6, 1],\n                                ease: 'easeInOut',\n                              }\n                              : {\n                                duration: 0.3,\n                              }\n                        }\n                    >\n                      {/* Progress indicator */}\n                      <div className=\"absolute -top-20 left-1/2 transform -translate-x-1/2\">\n                        <div className=\"flex gap-2\">\n                          {[0, 1, 2].map((i) => (\n                              <motion.div\n                                  key={i}\n                                  className={`w-4 h-4 rounded-full ${i < stage ? 'bg-button' : 'bg-primary/30'}`}\n                                  animate={{\n                                    scale: i === stage - 1 ? [1, 1.2, 1] : 1,\n                                    boxShadow:\n                                        i < stage\n                                            ? [\n                                              '0 0 0 0 rgba(255, 149, 221, 0)',\n                                              '0 0 20px 10px rgba(255, 149, 221, 0.5)',\n                                              '0 0 0 0 rgba(255, 149, 221, 0)',\n                                            ]\n                                            : 'none',\n                                  }}\n                                  transition={{ duration: 1.5, repeat: Infinity }}\n                              />\n                          ))}\n                        </div>\n                      </div>\n\n                      {/* Capsule body */}\n                      <motion.div\n                          className=\"w-80 h-[28rem] rounded-3xl relative cursor-pointer overflow-hidden\"\n                          style={{\n                            background: `linear-gradient(135deg, ${isUnlocking ? '#FF95DD' : '#5E3762'}, ${\n                                isUnlocking ? '#B2779F' : '#A7ACCD'\n                            })`,\n                          }}\n                          whileHover={{ scale: isLocked ? 1 : 1.02 }}\n                          onClick={handleUnlock}\n                      >\n                        {/* Glowing effects */}\n                        <motion.div\n                            className=\"absolute inset-0\"\n                            animate={{\n                              background: isUnlocking\n                                  ? [\n                                    'radial-gradient(circle at center, transparent 0%, transparent 100%)',\n                                    'radial-gradient(circle at center, rgba(255,149,221,0.5) 0%, transparent 70%)',\n                                    'radial-gradient(circle at center, transparent 0%, transparent 100%)',\n                                  ]\n                                  : 'none',\n                            }}\n                            transition={{ duration: 2, repeat: Infinity }}\n                        />\n\n                        {/* Capsule details */}\n                        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-4\">\n                          <motion.div\n                              animate={\n                                isUnlocking\n                                    ? {\n                                      scale: [1, 2, 0],\n                                      rotate: [0, 180, 360],\n                                      opacity: [1, 0.8, 0],\n                                    }\n                                    : {\n                                      scale: 1,\n                                      rotate: 0,\n                                      opacity: 1,\n                                    }\n                              }\n                              transition={{ duration: 1.5 }}\n                          >\n                            {stage < 3 ? (\n                                <Lock className=\"w-16 h-16 text-text\" />\n                            ) : (\n                                <Sparkles className=\"w-16 h-16 text-button\" />\n                            )}\n                          </motion.div>\n                          <motion.div\n                              className=\"text-text font-bold text-xl text-center\"\n                              animate={\n                                isUnlocking\n                                    ? {\n                                      opacity: [1, 0],\n                                      y: [0, -20],\n                                    }\n                                    : {}\n                              }\n                              transition={{ duration: 1 }}\n                          >\n                            {isLocked\n                                ? `Available in ${Math.abs(processedCapsuleData?.time?.days_until_available)} days`\n                                : stage < 3\n                                    ? 'Click to Unlock'\n                                    : 'Opening...'}\n                          </motion.div>\n                        </div>\n\n                        {/* Decorative elements */}\n                        <motion.div\n                            className=\"absolute top-8 left-1/2 -translate-x-1/2 w-40 h-1 rounded\"\n                            style={{ background: isUnlocking ? '#FF95DD' : '#A7ACCD' }}\n                            animate={\n                              isUnlocking\n                                  ? {\n                                    scaleX: [1, 1.5, 0],\n                                    opacity: [1, 0.8, 0],\n                                  }\n                                  : {}\n                            }\n                            transition={{ duration: 1.5 }}\n                        />\n                        <motion.div\n                            className=\"absolute bottom-8 left-1/2 -translate-x-1/2 w-40 h-1 rounded\"\n                            style={{ background: isUnlocking ? '#FF95DD' : '#A7ACCD' }}\n                            animate={\n                              isUnlocking\n                                  ? {\n                                    scaleX: [1, 1.5, 0],\n                                    opacity: [1, 0.8, 0],\n                                  }\n                                  : {}\n                            }\n                            transition={{ duration: 1.5 }}\n                        />\n\n                        <Clock className=\"absolute bottom-16 left-1/2 transform -translate-x-1/2 w-6 h-6 text-text\" />\n\n                        {/* Title at the bottom */}\n                        <div className=\"absolute bottom-2 left-0 right-0 text-center px-4\">\n                          <p className=\"text-text text-sm font-medium truncate\">{processedCapsuleData?.title}</p>\n                        </div>\n                      </motion.div>\n                    </motion.div>\n                  </div>\n              ) : (\n                  <div className=\"relative w-full h-full\">\n                    {/* Memory Player */}\n                    <div className=\"absolute inset-0 bg-black\">\n                      <AnimatePresence mode=\"wait\">\n                        {validImages.length > 0 && (\n                            <motion.div\n                                key={activeIndex}\n                                className=\"relative w-full h-full\"\n                                {...getImageAnimation()}\n                            >\n                              <div className=\"absolute inset-0 bg-gradient-to-b from-black/20 to-black/60\" />\n                              <img\n                                  src={currentImage.src || '/api/placeholder/800/600'}\n                                  alt={currentImage.caption}\n                                  className=\"w-full h-full object-cover scale-110\"\n                              />\n\n                              {/* Caption */}\n                              <motion.div\n                                  className=\"absolute bottom-20 left-0 right-0 p-8 text-center\"\n                                  initial={{ y: 50, opacity: 0 }}\n                                  animate={{ y: 0, opacity: 1 }}\n                                  transition={{ delay: 0.5, duration: 1 }}\n                              >\n                                <h2 className=\"text-white text-4xl font-bold mb-2\">{currentImage.caption}</h2>\n                                <p className=\"text-white/80 text-xl\">{currentImage.date}</p>\n                              </motion.div>\n                            </motion.div>\n                        )}\n                      </AnimatePresence>\n\n                      {/* Progress indicators */}\n                      {validImages.length > 0 && (\n                          <div className=\"absolute top-6 left-4 right-4 flex gap-2 z-10\">\n                            {validImages.map((_, index) => (\n                                <div\n                                    key={index}\n                                    className=\"flex-1 h-1.5 bg-white/20 rounded-full overflow-hidden cursor-pointer\"\n                                    onClick={() => {\n                                      setActiveIndex(index);\n                                      setProgress(0);\n                                    }}\n                                >\n                                  <motion.div\n                                      className=\"h-full bg-white\"\n                                      initial={{ width: '0%' }}\n                                      animate={{\n                                        width: index === activeIndex ? `${progress}%` : index < activeIndex ? '100%' : '0%',\n                                      }}\n                                      transition={{ duration: 0.1 }}\n                                  />\n                                </div>\n                            ))}\n                          </div>\n                      )}\n\n                      {/* Controls */}\n                      {validImages.length > 0 && (\n                          <div className=\"absolute bottom-0 left-0 right-0 p-4 flex justify-center items-center gap-4 bg-gradient-to-t from-black/80 to-transparent\">\n                            <motion.button\n                                className=\"p-3 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-colors\"\n                                whileHover={{ scale: 1.1 }}\n                                whileTap={{ scale: 0.95 }}\n                                onClick={() => setIsPlaying(!isPlaying)}\n                            >\n                              {isPlaying ? (\n                                  <Pause className=\"w-6 h-6 text-white\" />\n                              ) : (\n                                  <Play className=\"w-6 h-6 text-white\" />\n                              )}\n                            </motion.button>\n                            <motion.button\n                                className=\"p-3 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-colors\"\n                                whileHover={{ scale: 1.1 }}\n                                whileTap={{ scale: 0.95 }}\n                                onClick={() => {\n                                  setActiveIndex((prev) => (prev + 1) % validImages.length);\n                                  setProgress(0);\n                                }}\n                            >\n                              <RefreshCw className=\"w-6 h-6 text-white\" />\n                            </motion.button>\n                          </div>\n                      )}\n                    </div>\n                  </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n  );\n};\n\nexport default AnimatedCapsule;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}